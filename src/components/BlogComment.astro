---
---

<section class="giscus p-6 mt-6"></section>

<div id="giscus-container"></div>

<script is:inline>
  function loadGiscus(theme) {
    const giscusContainer = document.getElementById('giscus-container');
    giscusContainer.innerHTML = ''; // Clear previous instance

    const script = document.createElement('script');
    script.src = 'https://giscus.app/client.js';
    script.setAttribute('data-repo', 'deveaston06/elprog-blog-astro');
    script.setAttribute('data-repo-id', 'R_kgDOLNPjzA');
    script.setAttribute('data-category', 'Blog Post Comments');
    script.setAttribute('data-category-id', 'DIC_kwDOLNPjzM4CpsTp');
    script.setAttribute('data-mapping', 'url');
    script.setAttribute('data-strict', '0');
    script.setAttribute('data-reactions-enabled', '1');
    script.setAttribute('data-emit-metadata', '0');
    script.setAttribute('data-input-position', 'bottom');
    script.setAttribute('data-theme', theme);
    script.setAttribute('data-lang', 'en');
    script.setAttribute('data-loading', 'lazy');
    script.crossOrigin = 'anonymous';
    script.async = true;

    giscusContainer.appendChild(script);
  }

  // Usage: change theme after load
  document.addEventListener('DOMContentLoaded', () => {
    let currentMode = document.documentElement.classList.contains("dark") ? "dark" : "light";
    loadGiscus(currentMode); // or 'dark'
  });
</script>